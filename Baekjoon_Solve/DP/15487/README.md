## [골3] A[j] - A[i] + A[l] - A[k] (15487번)

https://www.acmicpc.net/problem/15487

### 문제 유형

DP

<br>

### 어려웠던 점 / 문제의 핵심

문제는 간단하다.  i < j < k < l을 만족하는 (i, j, k, l) 중에서 `A[j]-A[i]+A[l]-A[k]`의 최댓값을 찾는 문제이다.

`A[j]-A[i]+A[l]-A[k]`의 값은 `A[j] - A[i]`가 최대가 될 수록, `A[l] - A[k]`가 최대가 될 수록 커진다.

N이 최대 100만이기 때문에 브루트포스, 이분 탐색, 투 포인터로 접근할 경우 각 각 O(N ^ 4), O(N ^ 2 * logN), O(N ^ 3)이 걸린다.

DP로 풀 경우 O(2 * N)으로 문제를 해결할 수 있다.

#### 문제 접근 방식

만약에 `A[j]-A[i]+A[l]-A[k]`가 아니라, `A[j] - A[i]`의 최댓값을 찾으라고 한다면 어떻게 찾을 수 있을까?

DP 테이블을 다음과 같이 정의할 수 있을 것이다. DP[i]를 `max(A[i] - min(A[1:i]))`라고 할 때

`A[i]에서 i - 1이하의 인덱스의 수 중 가장 작은 숫자를 뺀 숫자 중 최댓값`이라고 할 수 있다.

그렇게 하기 위해서는 A[i] 전까지 등장한 최솟값을 알고 있어야 하고, 이전까지 계산했던 `A[j] - A[i]의 최댓값`을 알고 있어야 한다.

저장해야할 값이 2개이기 때문에 DP배열도 2차원으로 선언해주고 다음과 같은 의미를 부여할 수 있다.

- `DP[i][0]`: `i`까지의 최솟값
- `DP[i][1]`: `A[i] - DP[i - 1][0]`과 `DP[i - 1][1]` 중 최댓값 (즉, `A[j] - A[i]`의 최댓값)

이렇게 하면 생각을 조금만 바꾸면 `A[l] - A[k]`의 최댓값도 비슷한 원리로 찾을 수 있다.

바로 수열 A를 뒤집은 다음에 역순으로 구성하여 `A[j] - A[i]`의 최댓값을 찾았듯이 `A[l] - A[k]`의 최댓값을 찾는 것이다.

- `RDP[i][0]`: `i`까지의 최댓값
  - 역순이기 때문에 `A[l]`의 값이 더 커야 `A[l] - A[k]`가 커지기 때문에 최댓값으로 설정하는 것이다.
- `RDP[i][1]`: `RDP[i - 1][0] - A[i]`과 `RDP[i - 1][1]` 중 최댓값 (즉, `A[l] - A[k]`의 최댓값)

이렇게 DP 배열들을 계산한 다음에

1부터 N - 2까지 순회(k, l을 고려했기 때문에 2개를 제외)하여 `DP[i][1] + RDP[N - i - 2][1]`의 최댓값을 찾는 것이다.

- DP[i]가 정방향으로 했을 때의 값이니 RDP[i]는 역방향으로 계산했기 때문에 N - 2 - i번 인덱스여야 아래 그림과 같이 계산할 수 있다.

![image](https://github.com/siwon-park/Problem_Solving/assets/93081720/cfa10749-1680-4e94-b073-e1c1f7a32f0f)



<br>

### 언어별 풀이 요약

| 언어   | 메모리    | 실행 시간(ms) | 시간복잡도 | 공간복잡도 | 풀이 시간 | 시도 횟수 | 해설 참고            |
| ------ | --------- | ------------- | ---------- | ---------- | --------- | --------- | -------------------- |
| Python |           |               |            |            |           |           |                      |
| Java   | 150212 KB | 624 ms        | O(2 * N)   | O(2 * N)   | 50 분     | 1         | :white_large_square: |
| Kotlin |           |               |            |            |           |           |                      |

<br>

### 예외(테스트) 케이스

```
```

7
