## [골4] 나락도 락이다 (26156번)

https://www.acmicpc.net/problem/26156

### 문제 유형

수학, DP, 조합론

<br>

### 어려웠던 점 / 문제의 핵심

#### 잘못된 풀이

`memo[i]`를 `i`번 인덱스에서 `R`로 끝난 부분 문자열의 개수로 정의하고 메모이제이션으로 접근하였다.

이미 memo[i]가 계산되어 있으면 값을 반환하고, 아니라면 부분 문자열의 개수는 `2 ^ n`개라는 점을 활용하여 1부터 i까지 계속해서 2를 곱해주는 방식을 사용하였다.

예상했던 대로 2의 제곱을 구하는 부분과 `K → C → O → R`로 `K`부터 거꾸로 올라가서 `ROCK`을 만족시키는 조건을 찾는데 시간이 많이 걸려 시간 초과 판정을 받았다.

#### 올바른 풀이

역시 처음 생각했던 DP 테이블 정의가 맞았다.

`ROCK`로 끝나는 부분 문자열의 개수를 구하기 위해서는 `K`로 끝나는 부분 문자열 중에서 `C`로 끝나는 부분 문자열 중에서 `O`로 끝나는 부분 문자열 중에서 `R`로 끝나는 부분 문자열을 찾아야 한다. (4중첩)

이를 위해 DP테이블을 `DP[N][5]`로 정의해주고, 다음과 같은 의미를 지니게 한다.

- `DP[N][0]`: N까지의 부분 문자열의 개수
- `DP[N][1]`: 끝이 `R`로 끝나는 부분 문자열 중 `R`을 반드시 포함하는 부분 문자열의 개수
- `DP[N][2]`: 끝이 `O`로 끝나는 부분 문자열 중 `R`을 포함하면서 `O`를 반드시 포함하는 부분 문자열의 개수
- `DP[N][3]`: 끝이 `C`로 끝나는 부분 문자열 중 `R`을 포함하면서 `O`를 포함하면서, `C`를 반드시 포함하는 부분 문자열의 개수
- `DP[N][4]`: 끝이 `K`로 끝나는 부분 문자열 중에서 `R`, `O`, `C`, `K`를 반드시 포함하는 부분 문자열의 개수이다.

위와 같이 정의하면 점화식은 다음과 같이 도출할 수 있다.

- `DP[N][0]`: (`DP[N - 1][0]` x 2) % MOD (부분 집합의 개수가 `2 ^ N`개이므로)
  - `DP[0][0]`은 공집합의 개수인 `1`로 체크한다.

- `DP[N][1]`:
  - 현재 문자가 `R`로 끝날 경우: `DP[N][1]` = (`DP[N - 1][0]` + `DP[N - 1][1]`) % MOD
  - 현재 문자가 `R`로 끝나지 않을 경우: `DP[N][1]` = `DP[N - 1][1]` % MOD
- `DP[N][2]`:
  - 현재 문자가 `O`로 끝날 경우: `DP[N][2]` = (`DP[N - 1][1]` + `DP[N - 1][2]`) % MOD
  - 현재 문자가 `O`로 끝나지 않을 경우: `DP[N][2]` = `DP[N - 1][2]` % MOD
- `DP[N][3]`: 
  - 현재 문자가 `C`로 끝날 경우: `DP[N][3]` = (`DP[N - 1][2]` + `DP[N - 1][3]`) % MOD
  - 현재 문자가 `C`로 끝나지 않을 경우: `DP[N][3]` = `DP[N - 1][3]` % MOD
- `DP[N][4]`:
  - 현재 문자가 `K`로 끝날 경우: `DP[N][4]` = (`DP[N - 1][3]` + `DP[N - 1][4]`) % MOD
  - 현재 문자가 `K`로 끝나지 않을 경우: `DP[N][4]` = `DP[N - 1][4]` % MOD

<br>

### 언어별 풀이 요약

| 언어   | 메모리   | 실행 시간(ms) | 시간복잡도 | 공간복잡도 | 풀이 시간 | 시도 횟수 | 해설 참고            |
| ------ | -------- | ------------- | ---------- | ---------- | --------- | --------- | -------------------- |
| Python |          |               |            |            |           |           |                      |
| Java   | 64868 KB | 436 ms        | O(N)       | O(N)       | 60분      | 3         | :white_large_square: |
| Kotlin |          |               |            |            |           |           |                      |

<br>

### 예외(테스트) 케이스

```
```

