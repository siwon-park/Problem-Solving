## [플3] 가로 블록 쌓기 (18407번)

https://www.acmicpc.net/problem/18407

### 문제 유형

자료 구조, 세그먼트 트리, 느리게 갱신되는 세그먼트 트리, 좌표 압축

<br>

### 어려웠던 점 / 문제의 핵심

좌표 압축 기법과 세그먼트 트리 기법이 필요한 문제.

먼저 주어지는 블럭의 좌표를 해싱하여 압축해야 한다.

단, 칸 1개를 좌표로 잡아야 하고, 블럭의 너비가 w이기 때문에 블럭이 차지하는 구간은 `[d, d + w)`이다.

즉, `[d, d + w - 1]`인 셈이다.

따라서 매번 주어지는 d와 d + w - 1을 저장한 다음 오름차순 정렬하여 해시맵을 통해 좌표 압축을 하면 된다.

그 후 구간의 높이 값을 저장하고 있는 세그먼트 트리를 구성한다. 이는 사실 구간의 최댓값을 저장하고 있는 세그먼트 트리이다.

그러나 주의할 점이 있다.

블럭이 쌓이는 방식이 테트리스처럼 아래에 빈 공간이 있으면 내려가는 형태가 아니다.

| (1) 빈 공간으로 내려감                                       | (2) 빈 공간에 내려가지 않음                                  |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![image](https://github.com/siwon-park/Problem_Solving/assets/93081720/72ba675e-bd18-4f45-be96-ad9253442ba6) | ![image](https://github.com/siwon-park/Problem_Solving/assets/93081720/4c3341d1-d799-4b40-b6d9-a90951d03248) |

만약 블럭이 아래 빈 공간으로 내려가서 쌓이는 구조였다면 단순히 구간의 최댓값을 저장하고 있는 세그먼트 트리를 구성하면 문제를 해결할 수 있다.

하지만 2번과 같이 빈 공간이 있어도 내려가지 않기 때문에 다른 방법이 필요하다.

구간의 최댓값을 저장하고 있는 세그먼트 트리를 이용한다는 것은 동일하지만, 

어떤 블럭이 쌓이기 전에 `해당 블럭이 쌓일 곳에 포함된 구간에 존재하는 블럭의 최대 높이`를 구해야 한다.

이 높이를 구하고 나면 지금 쌓여야 하는 블록이 어떤 높이로 쌓여야 하는지 알 수 있다.

예를 들어, 1번 블럭이 구간 [2, 5]에 쌓여 있다고 할 때 구간 [2, 5]가 차지하고 있는 높이의 최댓값은 1이다.

그럼 이제 2번 블럭이 구간 [1, 3]에 쌓여야 한다. 2번 블럭이 쌓이기 전에 구간 [1, 3]에 존재하는 블럭 높이의 최댓값을 계산한다.

계산했더니 1번 블럭이 구간 [2, 5]에 쌓여 있어서 구간 [1, 3]의 블럭 높이의 최댓값은 1이다.

따라서 2번 블럭은 높이를 2로 하여 쌓여야 한다.

즉, 이렇게 되면 구간의 최댓값을 저장하는 세그먼트 트리는 맞지만 lazy값은 구간에 들어오는 블럭의 개수를 누적하는 것이 아니라 해당 구간에 대해서 전부 특정 값(특정 높이)로 변경되어서 전달되어야 하므로, 부모의 lazy를 자식에게 전달하고, 이전에 전달된 lazy가 있더라도 새로 lazy가 갱신되면 해당 값으로 갱신되어야 한다.

<br>

### 언어별 풀이 요약

| 언어   | 메모리   | 실행 시간(ms) | 시간복잡도 | 공간복잡도 | 풀이 시간 | 시도 횟수 | 해설 참고            |
| ------ | -------- | ------------- | ---------- | ---------- | --------- | --------- | -------------------- |
| Python |          |               |            |            |           |           |                      |
| Java   | 80064 KB | 1148 ms       | O(2*MlogN) | O(N * 4)   | 60분      | 1         | :white_large_square: |
| Kotlin |          |               |            |            |           |           |                      |

<br>

### 예외(테스트) 케이스

```
```

