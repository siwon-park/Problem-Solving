## [플5] KCM Travel (10217번)

https://www.acmicpc.net/problem/10217

### 문제 유형

그래프 이론, 다익스트라, DP

<br>

### 어려웠던 점 / 문제의 핵심

다익스트라 + DP로 최적화를 잘 해줘야 하는 문제

최단 거리로 가되, 최대 `M`까지의 비용이 허락되기 때문에 `i번 도시까지 j의 비용으로 갈 수 있는 최단 거리(최소 소요 시간)`을 저장하고 있는 이차원의 최단 거리 테이블을 사용해야 한다.

그런데 중요한 것은 그대로 다익스트라 알고리즘을 적용하게 되면 시간 초과가 날 수 밖에 없다.

왜냐하면 비용이 `M`까지 허락된 다는 것은 최단 거리 탐색을 위해 소요되는 비용이 `M`이하이기만 하면 계속해서 탐색하기 때문이다.

#### 최적화 1

하지만 잘 생각해보면 만약에 `m1`의 비용으로 `nxt`까지 `d1`의 거리로 왔다면 `nxt`까지 `m1보다 큰 비용이 드는 것에 대해서는 탐색할 필요가 없어진다.`

왜냐하면 `m1`을 사용해서 `nxt`까지 갈 수 있는 최단 거리가 `d1`으로 갱신되었다면 어차피 비용을 `m1`을 쓰나, `m2`를 쓰나 `m3`를 쓰나 최단 거리가 `d1`임은 변함이 없기 때문이다.

따라서 일차적으로 매번 큐에 삽입하기 직전에 `m1`보다 큰 비용에 대해 `nxt`까지의 최단 거리 테이블을 `d1`으로 갱신시켜주면 된다.

#### 최적화 2

그러나 이것도 최적화가 필요하다. 왜냐하면 `M`의 최대는 1만이기 때문에 매번 최단 거리를 갱신할 때 1만번 순회하면 비효율적일 수 밖에 없다.

따라서 이차원의 배열을 하나 더 만든다. `i번 도시까지 j의 최단 거리(최소 소요 시간)로 갈 때 드는 비용`을 저장하고 있는 이차원의 테이블이다.

소요 시간의 최댓값이 1000이고, 노드의 수가 최대 100이기 때문에 최악의 거리는 최대 10만이다.

그래서 `dp[n + 1][100001]`과 같은 이차원의 정적 배열을 선언하면 된다.

이를 사용하여 최악의 경우 `M`회 매번 순회할 필요 없이 `nxt`까지 거리(소요 시간) `d1` 으로 갈 수 있는 비용이 `m1`보다 크다면 무시하는 것이다.

#### 최적화 3

문제를 잘 읽어보면 입력으로 들어올 수 있는 데이터에 중복과 같은 별 다른 내용이 명시된 것이 없기 때문에 최악의 경우의 수가 존재할 수도 있다. 따라서 이에 대해서도 고려해줘야 한다.

- 같은 비용, 같은 거리의 데이터가 계속해서 들어온다거나
- 같은 비용, 다른 거리의 데이터가 계속해서 들어온다거나
- 다른 비용, 같은 거리의 데이터가 계속해서 들어온다거나

만약 다른 비용, 다른 거리의 데이터라면 탐색을 통해서 어떤 것을 선택하는 것이 더 나은지 최적해를 찾아야 하지만, 위 3가지 케이스에 대해서는 절대적으로 더 좋은 데이터가 존재할 수 밖에 없기 때문에 반드시 전처리가 필요하다.

예를 들어,

```
u v 1 100
u v 2 99
u v 3 98
u v 4 97
```

과 같은 경우에는 최대 비용 제약 `M`이하에서 최단 거리를 탐색할 수 있을 수도 있어 고려를 해봐야 하지만

```
u v 2 2
u v 1 2
u v 1 1
```

이와 같은 경우라면 u v 1 1이 나머지 비용, 거리보다 절대적으로 좋기 때문에 u v 1 1을 선택해야 한다.

<br>

### 언어별 풀이 요약

| 언어   | 메모리    | 실행 시간(ms) | 시간복잡도 | 공간복잡도 | 풀이 시간 | 시도 횟수 | 해설 참고            |
| ------ | --------- | ------------- | ---------- | ---------- | --------- | --------- | -------------------- |
| Python |           |               |            |            |           |           |                      |
| Java   | 101756 KB | 1820 ms       | O(ElogV)   | O(EV)      | 120 분    | 6         | :white_large_square: |
| Kotlin |           |               |            |            |           |           |                      |

<br>

### 예외(테스트) 케이스

```
```

